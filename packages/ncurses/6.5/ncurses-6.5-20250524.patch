# ncurses 6.5 - patch 20250524 - Thomas E. Dickey
#
# ------------------------------------------------------------------------------
#
# Ncurses 6.5 is at
#   https://invisible-island.net/archives/ncurses/
#   https://invisible-mirror.net/archives/ncurses/
#   https://ftp.gnu.org/gnu/ncurses/
#
# Patches for ncurses 6.5 can be found at
#   https://invisible-island.net/archives/ncurses/6.5
#   https://invisible-mirror.net/archives/ncurses/6.5
#
# ------------------------------------------------------------------------------
# https://invisible-island.net/archives/ncurses/6.5/ncurses-6.5-20250524.patch.gz
# patch by Thomas E. Dickey <dickey@invisible-island.net>
# created  Sat May 24 23:28:35 UTC 2025
# ------------------------------------------------------------------------------
# NEWS                             |    6 +++++-
# VERSION                          |    2 +-
# configure                        |    8 ++++----
# configure.in                     |    6 +++---
# dist.mk                          |    4 ++--
# include/curses.h.in              |   28 ++++++++++++++--------------
# package/debian-mingw/changelog   |    4 ++--
# package/debian-mingw64/changelog |    4 ++--
# package/debian/changelog         |    4 ++--
# package/mingw-ncurses.nsi        |    4 ++--
# package/mingw-ncurses.spec       |    2 +-
# package/ncurses.spec             |    2 +-
# package/ncursest.spec            |    2 +-
# 13 files changed, 40 insertions(+), 36 deletions(-)
# ------------------------------------------------------------------------------
Index: NEWS
Prereq:  1.4283 
--- ncurses-6.5-20250517+/NEWS	2025-05-17 18:56:42.000000000 +0000
+++ ncurses-6.5-20250524/NEWS	2025-05-24 18:58:06.000000000 +0000
@@ -26,7 +26,7 @@
 -- sale, use or other dealings in this Software without prior written        --
 -- authorization.                                                            --
 -------------------------------------------------------------------------------
--- $Id: NEWS,v 1.4283 2025/05/17 18:56:42 tom Exp $
+-- $Id: NEWS,v 1.4286 2025/05/24 18:58:06 tom Exp $
 -------------------------------------------------------------------------------
 
 This is a log of changes that ncurses has gone through since Zeyd started
@@ -46,6 +46,10 @@
 Changes through 1.9.9e did not credit all contributions;
 it is not possible to add this information.
 
+20250524
+	+ correct option-name used in configure script, which resulted in size
+	  change for cchar_t (cf: 20250517).
+
 20250517
 	+ initial changes for some ABI 7 features:
 	  + disable wgetch-events
Index: VERSION
--- ncurses-6.5-20250517+/VERSION	2025-05-17 10:17:12.000000000 +0000
+++ ncurses-6.5-20250524/VERSION	2025-05-24 09:59:15.000000000 +0000
@@ -1 +1 @@
-5:0:10	6.5	20250517
+5:0:10	6.5	20250524
Index: configure
--- ncurses-6.5-20250517+/configure	2025-05-17 20:39:08.000000000 +0000
+++ ncurses-6.5-20250524/configure	2025-05-24 18:52:44.000000000 +0000
@@ -1,5 +1,5 @@
 #! /bin/sh
-# From configure.in Revision: 1.797 .
+# From configure.in Revision: 1.798 .
 # Guess values for system-dependent variables and create Makefiles.
 # Generated by Autoconf 2.52.20250126.
 #
@@ -16044,9 +16044,9 @@
 	echo "$as_me:16044: checking if you want to extend support for direct color" >&5
 echo $ECHO_N "checking if you want to extend support for direct color... $ECHO_C" >&6
 
-# Check whether --enable-ext-colors or --disable-ext-colors was given.
-if test "${enable_ext_colors+set}" = set; then
-  enableval="$enable_ext_colors"
+# Check whether --enable-rgb-color or --disable-rgb-color was given.
+if test "${enable_rgb_color+set}" = set; then
+  enableval="$enable_rgb_color"
   with_rgb_color=$enableval
 else
   with_rgb_color=$cf_dft_rgb_color
Index: configure.in
Prereq:  1.797 
--- ncurses-6.5-20250517+/configure.in	2025-05-17 20:38:51.000000000 +0000
+++ ncurses-6.5-20250524/configure.in	2025-05-24 18:50:21.000000000 +0000
@@ -29,7 +29,7 @@
 dnl
 dnl Author: Thomas E. Dickey 1995-on
 dnl
-dnl $Id: configure.in,v 1.797 2025/05/17 20:38:51 tom Exp $
+dnl $Id: configure.in,v 1.798 2025/05/24 18:50:21 tom Exp $
 dnl Process this file with autoconf to produce a configure script.
 dnl
 dnl For additional information, see
@@ -38,7 +38,7 @@
 dnl
 dnl ---------------------------------------------------------------------------
 AC_PREREQ(2.52.20210101)
-AC_REVISION($Revision: 1.797 $)
+AC_REVISION($Revision: 1.798 $)
 AC_INIT(ncurses/base/lib_initscr.c)
 AC_CONFIG_HEADER(include/ncurses_cfg.h:include/ncurses_cfg.hin)
 
@@ -1217,7 +1217,7 @@
 	fi
 	###   use option --enable-rgb-color to extend support for direct-color
 	AC_MSG_CHECKING(if you want to extend support for direct color)
-	AC_ARG_ENABLE(ext-colors,
+	AC_ARG_ENABLE(rgb-color,
 		[  --enable-rgb-color      compile for extended direct-color],
 		[with_rgb_color=$enableval],
 		[with_rgb_color=$cf_dft_rgb_color])
Index: dist.mk
Prereq:  1.1669 
--- ncurses-6.5-20250517+/dist.mk	2025-05-17 10:17:12.000000000 +0000
+++ ncurses-6.5-20250524/dist.mk	2025-05-24 09:59:15.000000000 +0000
@@ -26,7 +26,7 @@
 # use or other dealings in this Software without prior written               #
 # authorization.                                                             #
 ##############################################################################
-# $Id: dist.mk,v 1.1669 2025/05/17 10:17:12 tom Exp $
+# $Id: dist.mk,v 1.1670 2025/05/24 09:59:15 tom Exp $
 # Makefile for creating ncurses distributions.
 #
 # This only needs to be used directly as a makefile by developers, but
@@ -38,7 +38,7 @@
 # These define the major/minor/patch versions of ncurses.
 NCURSES_MAJOR = 6
 NCURSES_MINOR = 5
-NCURSES_PATCH = 20250517
+NCURSES_PATCH = 20250524
 
 # We don't append the patch to the version, since this only applies to releases
 VERSION = $(NCURSES_MAJOR).$(NCURSES_MINOR)
Index: include/curses.h.in
Prereq:  1.294 
--- ncurses-6.5-20250517+/include/curses.h.in	2025-05-17 20:16:50.000000000 +0000
+++ ncurses-6.5-20250524/include/curses.h.in	2025-05-24 16:38:03.000000000 +0000
@@ -33,7 +33,7 @@
  *     and: Thomas E. Dickey                        1996-on                 *
  ****************************************************************************/
 
-/* $Id: curses.h.in,v 1.294 2025/05/17 20:16:50 tom Exp $ */
+/* $Id: curses.h.in,v 1.295 2025/05/24 16:38:03 tom Exp $ */
 
 #ifndef __NCURSES_H
 #define __NCURSES_H
@@ -175,14 +175,14 @@
  * KEY_RESIZE is an extended feature that relies upon the SIGWINCH handler
  * in ncurses.
  */
-#if @NCURSES_EXT_FUNCS@
+#if @NCURSES_EXT_FUNCS@	/* NCURSES_EXT_FUNCS */
 #ifndef NCURSES_SIGWINCH
 #define NCURSES_SIGWINCH @cf_cv_enable_sigwinch@
 #endif
 #else
 #undef NCURSES_SIGWINCH
 #define NCURSES_SIGWINCH 0
-#endif
+#endif /* NCURSES_EXT_FUNCS */
 
 /*
  * In certain environments, we must work around linker problems for data
@@ -939,7 +939,7 @@
 /*
  * These functions are extensions - not in X/Open Curses.
  */
-#if @NCURSES_EXT_FUNCS@
+#if @NCURSES_EXT_FUNCS@	/* NCURSES_EXT_FUNCS */
 #undef  NCURSES_EXT_FUNCS
 #define NCURSES_EXT_FUNCS @NCURSES_PATCH@
 typedef int (*NCURSES_WINDOW_CB)(WINDOW *, void *);
@@ -1002,15 +1002,15 @@
 extern NCURSES_EXPORT(int) wgetdelay (const WINDOW *);		/* @GENERATED_EXT_FUNCS@ */
 extern NCURSES_EXPORT(int) wgetscrreg (const WINDOW *, int *, int *); /* @GENERATED_EXT_FUNCS@ */
 
-#else
+#else /* !NCURSES_EXT_FUNCS */
 #define curses_version() NCURSES_VERSION
-#endif
+#endif /* NCURSES_EXT_FUNCS */
 
 /*
  * Extra extension-functions, which pass a SCREEN pointer rather than using
  * a global variable SP.
  */
-#if @NCURSES_SP_FUNCS@
+#if @NCURSES_SP_FUNCS@	/* NCURSES_SP_FUNCS */
 #undef  NCURSES_SP_FUNCS
 #define NCURSES_SP_FUNCS @NCURSES_PATCH@
 #define NCURSES_SP_NAME(name) name##_sp
@@ -1094,7 +1094,7 @@
 extern NCURSES_EXPORT(void) NCURSES_SP_NAME(use_tioctl) (SCREEN*, bool); /* implemented:SP_FUNC */
 extern NCURSES_EXPORT(int) NCURSES_SP_NAME(vidattr) (SCREEN*, chtype);	/* implemented:SP_FUNC */
 extern NCURSES_EXPORT(int) NCURSES_SP_NAME(vidputs) (SCREEN*, chtype, NCURSES_SP_OUTC); /* implemented:SP_FUNC */
-#if @NCURSES_EXT_FUNCS@
+#if @NCURSES_EXT_FUNCS@	/* NCURSES_EXT_FUNCS */
 extern NCURSES_EXPORT(int) NCURSES_SP_NAME(alloc_pair) (SCREEN*, int, int); /* implemented:EXT_SP_FUNC */
 extern NCURSES_EXPORT(int) NCURSES_SP_NAME(assume_default_colors) (SCREEN*, int, int);	/* implemented:EXT_SP_FUNC */
 extern NCURSES_EXPORT(int) NCURSES_SP_NAME(define_key) (SCREEN*, const char *, int);	/* implemented:EXT_SP_FUNC */
@@ -1122,13 +1122,13 @@
 extern NCURSES_EXPORT(int) NCURSES_SP_NAME(set_tabsize) (SCREEN*, int);	/* implemented:EXT_SP_FUNC */
 extern NCURSES_EXPORT(int) NCURSES_SP_NAME(use_default_colors) (SCREEN*);	/* implemented:EXT_SP_FUNC */
 extern NCURSES_EXPORT(int) NCURSES_SP_NAME(use_legacy_coding) (SCREEN*, int);	/* implemented:EXT_SP_FUNC */
-#endif
-#else
+#endif /* NCURSES_EXT_FUNCS */
+#else /* !NCURSES_SP_FUNCS */
 #undef  NCURSES_SP_FUNCS
 #define NCURSES_SP_FUNCS 0
 #define NCURSES_SP_NAME(name) name
 #define NCURSES_SP_OUTC NCURSES_OUTC
-#endif
+#endif /* NCURSES_SP_FUNCS */
 
 /* attributes */
 
@@ -1159,7 +1159,7 @@
 #define A_TOP		NCURSES_BITS(@cf_cv_1UL@,21)
 #define A_VERTICAL	NCURSES_BITS(@cf_cv_1UL@,22)
 
-#if @NCURSES_EXT_FUNCS@
+#if @NCURSES_EXT_FUNCS@	/* NCURSES_EXT_FUNCS */
 #define A_ITALIC	NCURSES_BITS(@cf_cv_1UL@,23)	/* ncurses extension */
 #if @NCURSES_RGB_COLORS@	/* NCURSES_RGB_COLORS */
 #define A_FOREGROUND	NCURSES_BITS(@cf_cv_1UL@,17)	/* ncurses extension */
@@ -1453,7 +1453,7 @@
 /*
  * These macros are extensions - not in X/Open Curses.
  */
-#if @NCURSES_EXT_FUNCS@
+#if @NCURSES_EXT_FUNCS@	/* NCURSES_EXT_FUNCS */
 #if !NCURSES_OPAQUE
 #define is_cleared(win)		(NCURSES_OK_ADDR(win) ? (win)->_clear : FALSE)
 #define is_idcok(win)		(NCURSES_OK_ADDR(win) ? (win)->_idcok : FALSE)
@@ -1471,7 +1471,7 @@
 #define wgetparent(win)		(NCURSES_OK_ADDR(win) ? (win)->_parent : 0)
 #define wgetscrreg(win,t,b)	(NCURSES_OK_ADDR(win) ? (*(t) = (win)->_regtop, *(b) = (win)->_regbottom, OK) : ERR)
 #endif
-#endif
+#endif /* NCURSES_EXT_FUNCS */
 
 /*
  * X/Open says this returns a bool; SVr4 also checked for out-of-range line.
Index: package/debian-mingw/changelog
--- ncurses-6.5-20250517+/package/debian-mingw/changelog	2025-05-17 10:17:12.000000000 +0000
+++ ncurses-6.5-20250524/package/debian-mingw/changelog	2025-05-24 09:59:15.000000000 +0000
@@ -1,8 +1,8 @@
-ncurses6td (6.5+20250517) unstable; urgency=low
+ncurses6td (6.5+20250524) unstable; urgency=low
 
   * latest weekly patch
 
- -- Thomas E. Dickey <dickey@invisible-island.net>  Sat, 17 May 2025 06:17:12 -0400
+ -- Thomas E. Dickey <dickey@invisible-island.net>  Sat, 24 May 2025 05:59:15 -0400
 
 ncurses6 (5.9+20131005) unstable; urgency=low
 
Index: package/debian-mingw64/changelog
--- ncurses-6.5-20250517+/package/debian-mingw64/changelog	2025-05-17 10:17:12.000000000 +0000
+++ ncurses-6.5-20250524/package/debian-mingw64/changelog	2025-05-24 09:59:15.000000000 +0000
@@ -1,8 +1,8 @@
-ncurses6td (6.5+20250517) unstable; urgency=low
+ncurses6td (6.5+20250524) unstable; urgency=low
 
   * latest weekly patch
 
- -- Thomas E. Dickey <dickey@invisible-island.net>  Sat, 17 May 2025 06:17:12 -0400
+ -- Thomas E. Dickey <dickey@invisible-island.net>  Sat, 24 May 2025 05:59:15 -0400
 
 ncurses6 (5.9+20131005) unstable; urgency=low
 
Index: package/debian/changelog
--- ncurses-6.5-20250517+/package/debian/changelog	2025-05-17 10:17:12.000000000 +0000
+++ ncurses-6.5-20250524/package/debian/changelog	2025-05-24 09:59:15.000000000 +0000
@@ -1,8 +1,8 @@
-ncurses6td (6.5+20250517) unstable; urgency=low
+ncurses6td (6.5+20250524) unstable; urgency=low
 
   * latest weekly patch
 
- -- Thomas E. Dickey <dickey@invisible-island.net>  Sat, 17 May 2025 06:17:12 -0400
+ -- Thomas E. Dickey <dickey@invisible-island.net>  Sat, 24 May 2025 05:59:15 -0400
 
 ncurses6 (5.9+20120608) unstable; urgency=low
 
Index: package/mingw-ncurses.nsi
Prereq:  1.703 
--- ncurses-6.5-20250517+/package/mingw-ncurses.nsi	2025-05-17 10:17:12.000000000 +0000
+++ ncurses-6.5-20250524/package/mingw-ncurses.nsi	2025-05-24 09:59:15.000000000 +0000
@@ -1,4 +1,4 @@
-; $Id: mingw-ncurses.nsi,v 1.703 2025/05/17 10:17:12 tom Exp $
+; $Id: mingw-ncurses.nsi,v 1.704 2025/05/24 09:59:15 tom Exp $
 
 ; TODO add examples
 ; TODO bump ABI to 6
@@ -10,7 +10,7 @@
 !define VERSION_MAJOR "6"
 !define VERSION_MINOR "5"
 !define VERSION_YYYY  "2025"
-!define VERSION_MMDD  "0517"
+!define VERSION_MMDD  "0524"
 !define VERSION_PATCH ${VERSION_YYYY}${VERSION_MMDD}
 
 !define MY_ABI   "5"
Index: package/mingw-ncurses.spec
--- ncurses-6.5-20250517+/package/mingw-ncurses.spec	2025-05-17 10:17:12.000000000 +0000
+++ ncurses-6.5-20250524/package/mingw-ncurses.spec	2025-05-24 09:59:15.000000000 +0000
@@ -3,7 +3,7 @@
 Summary: shared libraries for terminal handling
 Name: mingw32-ncurses6
 Version: 6.5
-Release: 20250517
+Release: 20250524
 License: X11
 Group: Development/Libraries
 URL: https://invisible-island.net/ncurses/
Index: package/ncurses.spec
--- ncurses-6.5-20250517+/package/ncurses.spec	2025-05-17 10:17:12.000000000 +0000
+++ ncurses-6.5-20250524/package/ncurses.spec	2025-05-24 09:59:15.000000000 +0000
@@ -1,7 +1,7 @@
 Summary: shared libraries for terminal handling
 Name: ncurses6
 Version: 6.5
-Release: 20250517
+Release: 20250524
 License: X11
 Group: Development/Libraries
 URL: https://invisible-island.net/ncurses/
Index: package/ncursest.spec
--- ncurses-6.5-20250517+/package/ncursest.spec	2025-05-17 10:17:12.000000000 +0000
+++ ncurses-6.5-20250524/package/ncursest.spec	2025-05-24 09:59:15.000000000 +0000
@@ -1,7 +1,7 @@
 Summary: Curses library with POSIX thread support.
 Name: ncursest6
 Version: 6.5
-Release: 20250517
+Release: 20250524
 License: X11
 Group: Development/Libraries
 Source: ncurses-%{version}-%{release}.tgz
